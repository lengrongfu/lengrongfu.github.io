{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2018-10-17-es-dynamic-index-create/",
    "result": {"data":{"site":{"siteMetadata":{"title":"LRF"}},"markdownRemark":{"id":"a2e0aa7a-6b0a-5740-80d8-f57da60004b6","excerpt":"index 通过创建来进行动态模版的创建。 创建模版 创建第一天的数据 创建第二天的数据 后面都是依次类推。 禁止自动创建索引 删除索引 为了避免意外的执行了删除所有数据的命令，可加入如下的配置。 索引设置 可以通过修改配置自定义索引行为，详细配置参照索引模块。 参考文档 https://www.elastic.co…","html":"<h1>index</h1>\n<p>通过创建<code class=\"language-text\">template</code>来进行动态模版的创建。</p>\n<ul>\n<li>创建模版</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">PUT _template/template_1\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"template\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"test-*\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"settings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"number_of_shards\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"mappings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"type1\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"_source\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"host_name\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"keyword\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"created_at\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"date\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"format\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"EEE MMM dd HH:mm:ss Z YYYY\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>创建第一天的数据</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">PUT test<span class=\"token number\">-2018.08</span>.<span class=\"token number\">10</span>/type1\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"host_name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"created_at\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>创建第二天的数据</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">PUT test<span class=\"token number\">-2018.08</span>.<span class=\"token number\">11</span>/type1\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"host_name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"created_at\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>后面都是依次类推。</p>\n<h2>禁止自动创建索引</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">vim</span> config/elasticsearch.yml\naction.auto_create_index: <span class=\"token boolean\">false</span></code></pre></div>\n<h2>删除索引</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#用以下的请求来 删除索引:\nDELETE /my_index\n#你也可以这样删除多个索引：\n\nDELETE /index_one,index_two\nDELETE /index_*\n#你甚至可以这样删除 全部 索引：\nDELETE /_all\nDELETE /*</code></pre></div>\n<p>为了避免意外的执行了删除所有数据的命令，可加入如下的配置。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">vim</span> config/elasticsearch.yml\naction.destructive_requires_name: <span class=\"token boolean\">true</span>\n<span class=\"token comment\"># 配置之后就不能再执行删除所有的数据的命令，只能指定索引的删除</span></code></pre></div>\n<h2>索引设置</h2>\n<p>可以通过修改配置自定义索引行为，详细配置参照<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.6/index-modules.html\">索引模块</a>。</p>\n<h2>参考文档</h2>\n<ul>\n<li><a href=\"https://www.elastic.co/guide/cn/elasticsearch/guide/current/_creating_an_index.html\">https://www.elastic.co/guide/cn/elasticsearch/guide/current/_creating_an_index.html</a></li>\n<li><a href=\"https://www.elastic.co/guide/cn/elasticsearch/guide/current/index-templates.html\">https://www.elastic.co/guide/cn/elasticsearch/guide/current/index-templates.html</a></li>\n<li><a href=\"https://www.elastic.co/blog/managing-time-based-indices-efficiently\">有效地管理Elasticsearch基于时间的指数</a></li>\n<li><a href=\"https://luyiisme.github.io/2017/04/13/es-rollover-index/\">更高效的数据</a></li>\n</ul>","frontmatter":{"title":"es 索引按时间自动创建","date":"October 17, 2018","description":null}},"previous":{"fields":{"slug":"/2018-10-17-es-node-restart-problme/"},"frontmatter":{"title":"ES 节点重启问题"}},"next":{"fields":{"slug":"/2018-10-17-es-single-node-install/"},"frontmatter":{"title":"es 单节点部署多个服务"}}},"pageContext":{"id":"a2e0aa7a-6b0a-5740-80d8-f57da60004b6","previousPostId":"6c4d6dfe-fe0a-5535-8d4a-e89892c367ec","nextPostId":"49b922e5-b3a3-5733-a981-db8e3bf800c4"}},
    "staticQueryHashes": ["2841359383","3257411868"]}