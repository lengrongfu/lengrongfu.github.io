{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2019-05-21-orange-原理/",
    "result": {"data":{"site":{"siteMetadata":{"title":"LRF"}},"markdownRemark":{"id":"4ef3b52f-9471-530c-a843-0036dc5b2916","excerpt":"Orange 工具介绍 orange github 设计文档 Orange 使用 Orange 原理 运行时更具文件内容中的来进行匹配规则，通过的执行顺序可知，在阶段就是为了通过分流规则来设置这个变量的值。\nlocation\n通过规则匹配来赋值给这个变量，然后通过执行这个方法就可以实现页面配置来进行转发。\ncode…","html":"<h1>Orange 工具介绍</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`Orange`是一个基于`OpenResty`的页面化的网关,提供了页面化的分流规则配置和权限配置。工具更多的信息参考设计文档和源代码。</code></pre></div>\n<ul>\n<li><a href=\"https://github.com/sumory/orange/blob/master/README_zh.md\">orange github</a></li>\n<li><a href=\"http://resty.b0.upaiyun.com/orange.pdf\">设计文档</a></li>\n</ul>\n<h1>Orange 使用</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">使用文档参考官方文档 [http://orange.sumory.com/docs/](http://orange.sumory.com/docs/).</code></pre></div>\n<h1>Orange 原理</h1>\n<p><code class=\"language-text\">orange</code>运行时更具<code class=\"language-text\">nginx.conf</code>文件内容中的<code class=\"language-text\">location</code>来进行匹配规则，通过<code class=\"language-text\">nginx</code>的执行顺序可知，在<code class=\"language-text\">access_by_lua_block</code>阶段就是为了通过分流规则来设置<code class=\"language-text\">upstream_url</code>这个变量的值。\n<img src=\"location.png\" alt=\"location\">\n通过规则匹配来赋值给<code class=\"language-text\">ngx.upstream_url</code>这个变量，然后通过执行<code class=\"language-text\">proxy_pass $upstream_url;</code>这个方法就可以实现页面配置来进行转发。\n<img src=\"code.png\" alt=\"code\">\n<img src=\"arch.png\" alt=\"arch\"></p>\n<h1>Orange 扩展</h1>\n<ul>\n<li><a href=\"https://github.com/linger1216/understanding-orange\">插件开发</a></li>\n</ul>\n<h1>Q&#x26;A</h1>\n<p>再生产中遇到的问题</p>\n<ul>\n<li>容器部署多个<code class=\"language-text\">orange</code>，共用一个数据库时会出现节点缓存问题,基于<code class=\"language-text\">swarm</code>编排容器。</li>\n<li>添加规则出现<code class=\"language-text\">uuid</code>重复，这是因为<code class=\"language-text\">uuid</code>这个库在容器中生成了冲突，所以需要提花一个包，这个问题在<code class=\"language-text\">issues</code>中提到过。</li>\n</ul>","frontmatter":{"title":"orange原理以及使用","date":"May 21, 2019","description":null}},"previous":{"fields":{"slug":"/2019-05-11-Introduction-to-Algorithms-lecture-7/"},"frontmatter":{"title":"散列表数据结构"}},"next":{"fields":{"slug":"/2019-06-08-Linux-Tcp-端口耗尽/"},"frontmatter":{"title":"Linux Tcp 端口耗尽"}}},"pageContext":{"id":"4ef3b52f-9471-530c-a843-0036dc5b2916","previousPostId":"67c408f7-c082-5944-8970-a3fc2cd84293","nextPostId":"c89f5c10-b95b-5d23-93aa-58986a87c16a"}},
    "staticQueryHashes": ["2841359383","3257411868"]}