{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2018-10-16-cloudera-problem/",
    "result": {"data":{"site":{"siteMetadata":{"title":"LRF"}},"markdownRemark":{"id":"cd3b5f76-78e9-5d38-bca8-83d1126a6d8f","excerpt":"如下为记录 使用过程中的一些常见问题。…","html":"<blockquote>\n<p>如下为记录<code class=\"language-text\">cloudera</code> 使用过程中的一些常见问题。</p>\n</blockquote>\n<h1>1、服务没有设置<code class=\"language-text\">/opt</code>这个挂载点</h1>\n<ul>\n<li><code class=\"language-text\">cloudera</code>所有的数据都是存储在<code class=\"language-text\">/opt</code>这个根目录下的，所以服务器在安装系统的时候最好让运维同事挂载一个大空间到这个目录下。</li>\n<li>如果安装的时候不知道，安装软件的时候可以选择存储空间,如果安装的时候也不知道，没有设置的话那就很悲催了。</li>\n<li>如果没有设置就回存到根目录的<code class=\"language-text\">/opt</code>下，这里面的存储空间一般都很小。说一下解决办法。</li>\n</ul>\n<p>1、重装（我没这精力）\n2、把<code class=\"language-text\">/opt</code>这个目录移动到一个大的挂载点上去，然后使用软连接，本人就是这么做的。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 步骤</span>\n<span class=\"token comment\">#1、先停掉集群。</span>\n$ <span class=\"token function\">mv</span> cloudera cloudera.bak\n$ <span class=\"token function\">mv</span> cloudera.bak /data/cloudera\n$ <span class=\"token function\">ln</span> -sv /data/cloudera cloudera\n<span class=\"token comment\"># 经过上面的步骤之后再重启集群就可以了。</span></code></pre></div>\n<h1>2、Error creating LevelDB timeseries store in directory /var/lib/cloudera-service-monitor/ts</h1>\n<blockquote>\n<p>具体现象如下，报找不到一个文件。解释一下出现这个问题的原因，还是由于根目录下的空间不够了，因此我移动了一个占有很</p>\n</blockquote>\n<p>大空间的包，就是错误中的 <code class=\"language-text\">/var/lib/cloudera-service-monitor</code> 这个目录，然后通过软连接进行访问的。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token number\">2018</span>-10-16 <span class=\"token number\">16</span>:24:25,993 INFO com.cloudera.cmon.firehose.Main: Cluster size: SMALL\n<span class=\"token number\">2018</span>-10-16 <span class=\"token number\">16</span>:24:26,056 INFO com.cloudera.cmon.tstore.leveldb.LDBResourceManager: Max <span class=\"token function\">file</span> descriptors: <span class=\"token number\">32768</span>\n<span class=\"token number\">2018</span>-10-16 <span class=\"token number\">16</span>:24:26,057 INFO com.cloudera.cmon.tstore.leveldb.LDBResourceManager: Setting maximum <span class=\"token function\">open</span> fds to: <span class=\"token number\">768</span>\n<span class=\"token number\">2018</span>-10-16 <span class=\"token number\">16</span>:24:26,181 ERROR com.cloudera.cmon.firehose.Main: Error creating LevelDB timeseries store <span class=\"token keyword\">in</span> directory /var/lib/cloudera-service-monitor/ts\norg.fusesource.leveldbjni.internal.NativeDB<span class=\"token variable\">$DBException</span><span class=\"token builtin class-name\">:</span> Corruption: <span class=\"token number\">3</span> missing files<span class=\"token punctuation\">;</span> e.g.: /data/lib/ts/ts_entity_metadata/000072.sst\n        at org.fusesource.leveldbjni.internal.NativeDB.checkStatus<span class=\"token punctuation\">(</span>NativeDB.java:194<span class=\"token punctuation\">)</span>\n        at org.fusesource.leveldbjni.internal.NativeDB.open<span class=\"token punctuation\">(</span>NativeDB.java:212<span class=\"token punctuation\">)</span>\n        at org.fusesource.leveldbjni.JniDBFactory.open<span class=\"token punctuation\">(</span>JniDBFactory.java:168<span class=\"token punctuation\">)</span>\n        at com.cloudera.cmon.tstore.leveldb.LDBUtils.openVersionedDB<span class=\"token punctuation\">(</span>LDBUtils.java:264<span class=\"token punctuation\">)</span>\n        at com.cloudera.cmon.tstore.leveldb.LDBUtils.openVersionedDB<span class=\"token punctuation\">(</span>LDBUtils.java:212<span class=\"token punctuation\">)</span>\n        at com.cloudera.cmon.tstore.leveldb.LDBTimeSeriesMetadataStore.openMetadataDB<span class=\"token punctuation\">(</span>LDBTimeSeriesMetadataStore.java:148<span class=\"token punctuation\">)</span>\n        at com.cloudera.cmon.tstore.leveldb.LDBTimeSeriesMetadataStore.<span class=\"token operator\">&lt;</span>init<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>LDBTimeSeriesMetadataStore.java:138<span class=\"token punctuation\">)</span>\n        at com.cloudera.cmon.firehose.Main.main<span class=\"token punctuation\">(</span>Main.java:453<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>说一下解决办法：</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 进行如下的操作，再重启就可以了。亲测可以</span>\n$ <span class=\"token function\">mv</span> /var/lib/cloudera-service-monitor /var/lib/cloudera-service-monitor.moved\n\n$ <span class=\"token function\">mv</span> /var/lib/cloudera-host-monitor /var/lib/cloudera-host-monitor.moved</code></pre></div>\n<ul>\n<li>参考：<a href=\"https://community.cloudera.com/t5/Security-Apache-Sentry/Host-Monitor-and-Service-Monitor-is-not-starting-after/td-p/49207\">https://community.cloudera.com/t5/Security-Apache-Sentry/Host-Monitor-and-Service-Monitor-is-not-starting-after/td-p/49207</a></li>\n</ul>","frontmatter":{"title":"cloudera 问题解决","date":"October 16, 2018","description":null}},"previous":{"fields":{"slug":"/2018-09-11-Sqoop/"},"frontmatter":{"title":"Sqoop User Guide(Sqoop使用指南)"}},"next":{"fields":{"slug":"/2018-10-17-es-xpack-install/"},"frontmatter":{"title":"ES X-Pack 5.4.3破解安装"}}},"pageContext":{"id":"cd3b5f76-78e9-5d38-bca8-83d1126a6d8f","previousPostId":"190ee72d-5e39-5eb8-bac7-160d321a64ef","nextPostId":"c67bfda4-f0f6-539d-b5e5-5f482a7b2c2b"}},
    "staticQueryHashes": ["2841359383","3257411868"]}