{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2018-10-31-ZooKeeper-kerberos/",
    "result": {"data":{"site":{"siteMetadata":{"title":"LRF"}},"markdownRemark":{"id":"84135c67-f846-55d4-a025-3caa663f25ca","excerpt":"中的 添加了 认证，写的代码需要操作中的,因此代码需要进行认证才能操作。 spring boot 项目进行认证 项目不需要进行任何修改和添加，在启动参数中加入认证即可，认证方式和的认证不一样，所以实现方式也不一样。 tomcat 项目进行认证 重启项目即可进行认证。 ZooKeeper kerberos…","html":"<blockquote>\n<p><code class=\"language-text\">Hadoop</code>中的<code class=\"language-text\">ZooKeeper</code> 添加了<code class=\"language-text\">kerberos</code> 认证，写的代码需要操作<code class=\"language-text\">Hadoop</code>中的<code class=\"language-text\">ZooKeeper</code>,因此代码需要进行认证才能操作<code class=\"language-text\">ZooKeeper</code>。</p>\n</blockquote>\n<h1>spring boot 项目进行认证</h1>\n<p>项目不需要进行任何修改和添加，在启动参数中加入认证即可，认证方式和<code class=\"language-text\">Hbase</code>的<code class=\"language-text\">kerberos</code>认证不一样，所以实现方式也不一样。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># -Dsun.security.krb5.debug=true 开启认证调试日志，这样有助于分析认证失败原因，可以达到事半功倍的效果</span>\n<span class=\"token comment\"># -Djava.security.auth.login.config=./jaas.conf 这是zookeeper的认证文件</span>\njava -jar -Djava.security.auth.login.config<span class=\"token operator\">=</span>./jaas.conf -Dsun.security.krb5.debug<span class=\"token operator\">=</span>true demo.jar</code></pre></div>\n<h1>tomcat 项目进行认证</h1>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># tomcat 进行认证需要进行配置到 catalina.sh 中</span>\n<span class=\"token assign-left variable\">CATALINA_OPTS</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">$CATALINA_OPTS</span>-Djava.security.auth.login.config=./jaas.conf\"</span>\n<span class=\"token assign-left variable\">CATALINA_OPTS</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">$CATALINA_OPTS</span> -Dsun.security.krb5.debug=true\"</span></code></pre></div>\n<p>重启项目即可进行认证。</p>\n<h1>ZooKeeper kerberos</h1>\n<p>\b在使用<code class=\"language-text\">jaas.conf</code>文件中要注意，此文件分为服务端和客户端的配置文件，不能给错了，如果使用错误也是不能进行认证，<code class=\"language-text\">keytab</code>也是不一样的，用错了也是不能进行认证通过的。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 服务端</span>\nServer <span class=\"token punctuation\">{</span>\n  com.sun.security.auth.module.Krb5LoginModule required\n  <span class=\"token assign-left variable\">useKeyTab</span><span class=\"token operator\">=</span>true\n  <span class=\"token assign-left variable\">keyTab</span><span class=\"token operator\">=</span><span class=\"token string\">\"/etc/zookeeper/conf/zookeeper.keytab\"</span>\n  <span class=\"token assign-left variable\">storeKey</span><span class=\"token operator\">=</span>true\n  <span class=\"token assign-left variable\">useTicketCache</span><span class=\"token operator\">=</span>false\n  <span class=\"token assign-left variable\">principal</span><span class=\"token operator\">=</span><span class=\"token string\">\"zookeeper/cdh1@JAVACHEN.COM\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 客户端</span>\nClient <span class=\"token punctuation\">{</span>\n  com.sun.security.auth.module.Krb5LoginModule required\n  <span class=\"token assign-left variable\">useKeyTab</span><span class=\"token operator\">=</span>true\n  <span class=\"token assign-left variable\">keyTab</span><span class=\"token operator\">=</span><span class=\"token string\">\"/etc/zookeeper/conf/zkcli.keytab\"</span>\n  <span class=\"token assign-left variable\">storeKey</span><span class=\"token operator\">=</span>true\n  <span class=\"token assign-left variable\">useTicketCache</span><span class=\"token operator\">=</span>false\n  <span class=\"token assign-left variable\">principal</span><span class=\"token operator\">=</span><span class=\"token string\">\"zkcli@JAVACHEN.COM\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>\b参考</h1>\n<ul>\n<li><a href=\"http://www.voidcn.com/article/p-hnbafumk-bez.html\">http://www.voidcn.com/article/p-hnbafumk-bez.html</a></li>\n</ul>","frontmatter":{"title":"ZooKeeper kerberos 客户端认证","date":"October 31, 2018","description":null}},"previous":{"fields":{"slug":"/2018-10-18-pinpoint-add-hbase-kerberos-auth/"},"frontmatter":{"title":"pinpoint 添加 hbase kerberos认证"}},"next":{"fields":{"slug":"/2018-10-31-DAWN-Group/"},"frontmatter":{"title":"DAWN Group"}}},"pageContext":{"id":"84135c67-f846-55d4-a025-3caa663f25ca","previousPostId":"d3a24941-4d5d-56ac-89bc-b3af21572d4d","nextPostId":"43410994-4e7e-561f-bcbb-4302b40c5dd9"}},
    "staticQueryHashes": ["2841359383","3257411868"]}