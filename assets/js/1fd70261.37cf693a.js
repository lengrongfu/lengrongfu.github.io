"use strict";(self.webpackChunkblogs=self.webpackChunkblogs||[]).push([[3004],{2454:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>a,frontMatter:()=>r,metadata:()=>i,toc:()=>h});var l=c(4848),d=c(8453);const r={slug:"Kubernetes-Network",title:"Kubernetes Network",authors:["rongfu"],tags:["Kubernetes","Kubernetes Network"]},s=void 0,i={permalink:"/blog/Kubernetes-Network",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2021-05-13-Kubernetes-Network.md",source:"@site/blog/2021-05-13-Kubernetes-Network.md",title:"Kubernetes Network",description:"Kubernetes Network \u57fa\u672c\u6982\u5ff5\u548c\u539f\u7406",date:"2021-05-13T00:00:00.000Z",tags:[{inline:!1,label:"Kubernetes",permalink:"/blog/tags/kubernetes",description:"kubernetes"},{inline:!1,label:"Kubernetes Network",permalink:"/blog/tags/kubernetes-network",description:"Kubernetes Network"}],readingTime:20.085,hasTruncateMarker:!0,authors:[{name:"Leng Student",title:"Softwore Developer",url:"https://github.com/lengrongfu",image_hrl:"https://avatars.githubusercontent.com/u/15009201?v=4",socials:{github:"https://github.com/lengrongfu"},key:"rongfu",page:null}],frontMatter:{slug:"Kubernetes-Network",title:"Kubernetes Network",authors:["rongfu"],tags:["Kubernetes","Kubernetes Network"]},unlisted:!1,prevItem:{title:"2020\u5e74\u5341\u5927\u6218\u7565\u6280\u672f\u8d8b\u52bf\uff1a\u5206\u5e03\u5f0f\u4e91",permalink:"/blog/\u5206\u5e03\u5f0f\u4e91"},nextItem:{title:"go channel \u5b9e\u73b0",permalink:"/blog/go-channel\u6e90\u7801"}},o={authorsImageUrls:[void 0]},h=[{value:"\u4e00\u3001\u5355\u673a\u5bb9\u5668\u7f51\u7edc",id:"\u4e00\u5355\u673a\u5bb9\u5668\u7f51\u7edc",level:2},{value:"\u540d\u8bcd",id:"\u540d\u8bcd",level:3},{value:"Host\u7f51\u7edc",id:"host\u7f51\u7edc",level:3},{value:"\u5982\u4f55\u901a\u4fe1",id:"\u5982\u4f55\u901a\u4fe1",level:3},{value:"\u4e8c\u3001\u8de8\u4e3b\u673a\u5bb9\u5668\u901a\u4fe1",id:"\u4e8c\u8de8\u4e3b\u673a\u5bb9\u5668\u901a\u4fe1",level:2},{value:"\u540d\u8bcd",id:"\u540d\u8bcd-1",level:4},{value:"\u8de8\u4e3b\u673a\u901a\u4fe1",id:"\u8de8\u4e3b\u673a\u901a\u4fe1",level:3},{value:"Overlay \u6a21\u5f0f",id:"overlay-\u6a21\u5f0f",level:3},{value:"1\u3001\u4e09\u5c42Flannel UDP",id:"1\u4e09\u5c42flannel-udp",level:5},{value:"Flannel0\u8bbe\u5907",id:"flannel0\u8bbe\u5907",level:6},{value:"2\u3001\u4e09\u5c42Calico ipip",id:"2\u4e09\u5c42calico-ipip",level:5},{value:"3\u3001\u4e8c\u5c42+\u4e09\u5c42VXLAN",id:"3\u4e8c\u5c42\u4e09\u5c42vxlan",level:5},{value:"Underlay \u6a21\u5f0f",id:"underlay-\u6a21\u5f0f",level:3},{value:"1\u3001\u4e09\u5c42\u6a21\u5f0fBGP",id:"1\u4e09\u5c42\u6a21\u5f0fbgp",level:5},{value:"Calico BGP \u4f7f\u7528",id:"calico-bgp-\u4f7f\u7528",level:6},{value:"2\u3001\u4e8c\u5c42VLAN",id:"2\u4e8c\u5c42vlan",level:5},{value:"3\u3001Flannel host-gw",id:"3flannel-host-gw",level:5}];function t(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"Kubernetes Network \u57fa\u672c\u6982\u5ff5\u548c\u539f\u7406"}),"\n",(0,l.jsx)(n.h2,{id:"\u4e00\u5355\u673a\u5bb9\u5668\u7f51\u7edc",children:"\u4e00\u3001\u5355\u673a\u5bb9\u5668\u7f51\u7edc"}),"\n",(0,l.jsx)(n.h3,{id:"\u540d\u8bcd",children:"\u540d\u8bcd"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u7f51\u7edc\u6808\uff1a\u7f51\u7edc\u6808\u5305\u62ec\u4e86\u7f51\u5361(",(0,l.jsx)(n.code,{children:"Network Interface"}),")\u3001\u56de\u73af\u8bbe\u5907(",(0,l.jsx)(n.code,{children:"Loopback Device"}),")\u3001\u8def\u7531\u8868(",(0,l.jsx)(n.code,{children:"Routing Table"}),")\u548c",(0,l.jsx)(n.code,{children:"Iptables"}),"\u89c4\u5219\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u8fdb\u7a0b\u6765\u8bf4\uff0c\u8fd9\u4e9b\u8981\u7d20\uff0c\u5c31\u6784\u6210\u4e86\u5b83\u53d1\u8d77\u8bf7\u6c42\u548c\u54cd\u5e94\u7f51\u7edc\u8bf7\u6c42\u7684\u57fa\u672c\u73af\u5883\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u7f51\u6865(",(0,l.jsx)(n.code,{children:"Bridge"}),")\uff1a",(0,l.jsx)(n.code,{children:"bridge"}),"\u662f\u4e00\u4e2a\u865a\u62df\u7f51\u7edc\u8bbe\u5907\uff0c\u6240\u4ee5\u5177\u6709\u7f51\u7edc\u8bbe\u5907\u7684\u7279\u5f81\uff0c\u53ef\u4ee5\u914d\u7f6e",(0,l.jsx)(n.code,{children:"IP"}),"\u3001",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\uff1b",(0,l.jsx)(n.code,{children:"Bridger"}),"\u662f\u4e00\u4e2a\u865a\u62df\u4ea4\u6362\u673a\uff0c\u5177\u6709\u548c\u7269\u7406\u4ea4\u6362\u673a\u7c7b\u4f3c\u7684\u529f\u80fd\u3002\u5b83\u662f\u5de5\u4f5c\u5728\u6570\u636e\u94fe\u8def\u5c42\u7684\u8bbe\u5907\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Veth Pair"}),": \u865a\u62df\u7f51\u7ebf\uff0c\u7528\u6765\u8fde\u63a5\u5bb9\u5668\u5230\u7f51\u6865\u4e0a\u7684\uff1b\u5b83\u88ab\u521b\u5efa\u51fa\u6765\u4ee5\u540e\uff0c\u603b\u662f\u4ee5\u4e24\u5f20\u865a\u62df\u7f51\u5361(",(0,l.jsx)(n.code,{children:"Veth Peer"}),")\u7684\u5f62\u5f0f\u6210\u5bf9\u51fa\u73b0\uff0c\u5e76\u4e14\uff0c\u4ece\u5176\u4e2d\u4e00\u4e2a\u7f51\u5361\u53d1\u51fa\u7684\u6570\u636e\u5305\u4f1a\u81ea\u52a8\u51fa\u73b0\u5728\u4e0e\u4e4b\u5bf9\u5e94\u7684\u7f51\u5361\u4e0a\uff0c\u54ea\u6015\u662f\u8fd9\u4e24\u5f20_*\u7f51\u5361_\u5728\u4e0d\u540c\u7684",(0,l.jsx)(n.code,{children:"Network Namespace"}),"\u4e2d\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ARP"}),": \u662f\u4e00\u4e2a\u901a\u8fc7\u4e09\u5c42\u7684",(0,l.jsx)(n.code,{children:"IP"}),"\u5730\u5740\u627e\u5230\u5bf9\u5e94\u4e8c\u5c42",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u7684\u534f\u8bae\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CAM\u8868"}),"\uff1a\u865a\u62df\u4ea4\u6362\u673a(\u8fd9\u91cc\u662f\u7f51\u6865)\u901a\u8fc7",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u5b66\u4e60\u7ef4\u62a4\u7684\u7aef\u53e3\u548c",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u7684\u5bf9\u5e94\u8868\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"host\u7f51\u7edc",children:"Host\u7f51\u7edc"}),"\n",(0,l.jsxs)(n.p,{children:["\u4f5c\u4e3a\u4e00\u4e2a\u5bb9\u5668\uff0c\u5728\u542f\u52a8\u65f6\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a",(0,l.jsx)(n.code,{children:"-net=host"}),"\uff0c\u4f7f\u7528\u5bbf\u4e3b\u673a\u7684",(0,l.jsx)(n.code,{children:"Network Namespace"}),"\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"$ docker run -d -net=host --name nginx-1 nginx\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u4f7f\u7528",(0,l.jsx)(n.code,{children:"Host"}),"\u7f51\u7edc\u7684\u4f18\u70b9\u662f\u7f51\u7edc\u6027\u80fd\u8f83\u597d\uff0c\u76f4\u63a5\u4f7f\u7528\u5bbf\u4e3b\u673a\u7684\u7f51\u7edc\u6808\uff0c\u7f3a\u70b9\u662f\u4f1a\u5f15\u5165\u5171\u4eab\u7f51\u7edc\u8d44\u6e90\u7684\u95ee\u9898\uff0c\u6bd4\u5982\u7aef\u53e3\u51b2\u7a81\u3002",(0,l.jsx)(n.strong,{children:"\u6240\u4ee5\uff0c\u5728\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u5e0c\u671b\u80fd\u4f7f\u7528\u81ea\u5df1Network Namespace\u91cc\u7684\u7f51\u7edc\u6808\uff0c\u62e5\u6709\u5c5e\u4e8e\u81ea\u5df1\u7684IP\u548c\u7aef\u53e3\u3002"})]}),"\n",(0,l.jsx)(n.h3,{id:"\u5982\u4f55\u901a\u4fe1",children:"\u5982\u4f55\u901a\u4fe1"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://gitee.com/lengrongfu/blog-static-file/raw/master/single_node_container_network.png",alt:"\u5355\u8282\u70b9\u5bb9\u5668\u7f51\u7edc\u901a\u4fe1"})}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u4e0a\u56fe\uff0c\u63cf\u8ff0\u4e86\u5355\u8282\u70b9\u5bb9\u5668\u7f51\u7edc\u7684\u901a\u4fe1\u6d41\u7a0b\uff0c\u4e0b\u9762\u4e3b\u8981\u6309",(0,l.jsx)(n.code,{children:"C1->C2"}),"\u7684\u8bbf\u95ee\u6d41\u7a0b\u6765\u8be6\u7ec6\u63cf\u8ff0\u4ea4\u4e92\u6d41\u7a0b:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"# \u5148\u521b\u5efa\u4e24\u4e2a\u5bb9\u5668\uff0c\u7528\u4e8e\u6a21\u62df\u53d1\u8d77\u8bf7\u6c42,\u542f\u52a8\u4e24\u4e2acentos\u5bb9\u5668\uff0c\u5e76\u5728\u91cc\u9762\u5b89\u88c5net-tools\u5de5\u5177\uff0c\u624d\u53ef\u4ee5\u4f7f\u7528ifconfig\u547d\u4ee4\n# \u521b\u5efaC1\uff0c\u5e76\u5b89\u88c5net-tools\n$ docker run -d -it --name c1 centos /bin/bash\n$ docker exec -it c1 bash\n$ [root@60671509044e /]# yum install -y net-tools\n# \u521b\u5efaC2\uff0c\u5e76\u5b89\u88c5net-tools\n$ docker run -d -it --name c2 centos /bin/bash\n$ docker exec -it c2 bash\n$ [root@94a6c877b01a /]# yum install -y net-tools\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5bb9\u5668",(0,l.jsx)(n.code,{children:"C1"}),"\u548c",(0,l.jsx)(n.code,{children:"C2"}),"\u542f\u52a8\u4e4b\u540e\uff0c\u5728\u5bb9\u5668\u4e2d\u90fd\u6709\u4e00\u6761\u9ed8\u8ba4\u7684\u8def\u7531\u89c4\u5219\uff0c\u5f53\u524d\u5bb9\u5668\u7f51\u6bb5\u7684\u6240\u6709\u8bf7\u6c42\u90fd\u4f1a\u8d70",(0,l.jsx)(n.code,{children:"eth0"}),"\u7f51\u5361\u8bbe\u5907\u3002","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"C1"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"# \u8fdb\u5165c1\u5bb9\u5668\uff0c\u67e5\u770bip\u4ee5\u53ca\u8def\u7531\u8868\n$ docker exec -it c1 bash\n# \u67e5\u770bIP\n$ ifconfig\neth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 172.17.0.7  netmask 255.255.0.0  broadcast 172.17.255.255\n        ether 02:42:ac:11:00:07  txqueuelen 0  (Ethernet)\n        RX packets 6698  bytes 9678058 (9.2 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 3518  bytes 195061 (190.4 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n# \u67e5\u770b\u8def\u7531       \n$ route\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         _gateway        0.0.0.0         UG    0      0        0 eth0\n172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 eth0\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"C2"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"# \u8fdb\u5165C2\u5bb9\u5668\u67e5\u770bIP\u548c\u8def\u7531\u8868\n$ docker exec -it c2 bash\n$ ifconfig\neth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 172.17.0.8  netmask 255.255.0.0  broadcast 172.17.255.255\n        ether 02:42:ac:11:00:08  txqueuelen 0  (Ethernet)\n        RX packets 6771  bytes 9681937 (9.2 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 3227  bytes 179347 (175.1 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n# \u67e5\u770b\u8def\u7531\n$ route\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         _gateway        0.0.0.0         UG    0      0        0 eth0\n172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 eth0\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u4e0a\u8ff0\u5bb9\u5668\u73b0\u5b9e\u6709\u81ea\u5df1\u7684",(0,l.jsx)(n.code,{children:"IP"}),"\u4ee5\u53ca",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\uff0c\u5e76\u4e14\u6bcf\u4e2a\u5bb9\u5668\u4e2d\u90fd\u6709\u9ed8\u8ba4\u8def\u7531",(0,l.jsx)(n.code,{children:"_gateway"}),"\u6307\u5411",(0,l.jsx)(n.code,{children:"eth0"}),"\u7f51\u5361\uff1b\u5e76\u4e14",(0,l.jsx)(n.code,{children:"_gateway"}),"\u6709\u5bf9\u5e94\u7684",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u5df2\u7ecf\u5b58\u5728\u4e8e\u672c\u5730",(0,l.jsx)(n.code,{children:"ARP"}),"\u7f13\u5b58\u4e2d\u3002"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4e3b\u673a\u4e4b\u95f4\u7f51\u7edc\u901a\u4fe1\u9700\u8981\u7528\u5230",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\uff0c\u8fd9\u662f\u6570\u636e\u94fe\u8def\u5c42\u8bc6\u522b\u4e3b\u673a\u7684\u65b9\u5f0f\uff0c",(0,l.jsx)(n.code,{children:"C1"}),"\u8bbf\u95ee",(0,l.jsx)(n.code,{children:"C2"}),"\u7684\u65f6\u5019\u4f1a\u5148\u4ece\u672c\u5730",(0,l.jsx)(n.code,{children:"ARP"}),"\u7f13\u5b58\u4e2d\u67e5\u627e\u662f\u5426\u6709",(0,l.jsx)(n.code,{children:"C2"}),"\u5bb9\u5668\u5bf9\u5e94\u7684",(0,l.jsx)(n.code,{children:"IP:172.17.0.3"}),"\u7684",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u3002\u5982\u679c\u6ca1\u6709\u5c31\u4f1a\u53d1\u8d77",(0,l.jsx)(n.code,{children:"ARP"}),"\u534f\u8bae\u67e5\u627e",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"# c1 -> c2 ,\u5148\u53d1\u8d77ARP\u8bf7\u6c42\u67e5\u627eMAC\u5730\u5740\uff0c\u53ef\u4ee5\u5728\u5bb9\u5668\u4e2d\u67e5\u770bARP\u7f13\u5b58\u5bf9\u5e94IP\u7684MAC\n$ docker exec -it c1 bash\n# \u5148\u67e5\u770b\u672c\u5730\u7684ARP\u7f13\u5b58\n$ [root@94a6c877b01a /]# arp\nAddress                  HWtype  HWaddress           Flags Mask            Iface\n_gateway                 ether   02:42:2e:8d:21:d6   C                     eth0\n# \u6267\u884cping\u547d\u4ee4\u5c31\u4f1a\u53d1\u8d77ARP\u5bfb\u5740\u8bf7\u6c42\n$ ping 172.17.0.8\n# \u518d\u67e5\u8be2\u672c\u5730arp\u7f13\u5b58\uff0c\u53d1\u73b0\u5df2\u7ecf\u6709MAC\u5730\u5740\u5b58\u5728\u4e86\n$ [root@60671509044e /]# arp\nAddress                  HWtype  HWaddress           Flags Mask            Iface\n172.17.0.8               ether   02:42:ac:11:00:08   C                     eth0\n_gateway                 ether   02:42:2e:8d:21:d6   C                     eth0\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ARP"}),"\u5bfb\u5740\u6d41\u7a0b\uff1a",(0,l.jsx)(n.code,{children:"C1"}),"\u5bb9\u5668\u53d1\u8d77",(0,l.jsx)(n.code,{children:"ARP"}),"\u8bf7\u6c42\uff0c\u8fdb\u8fc7\u672c\u5730\u8def\u7531\u534f\u8bae\u4e4b\u540e\u4f1a\u628a\u8bf7\u6c42\u8def\u7531\u5230\u7f51\u6865\u4e0a\uff0c\u6b64\u65f6\u7f51\u6865(",(0,l.jsx)(n.code,{children:"Bridge"}),")\u5145\u5f53\u4e00\u4e2a\u865a\u62df\u4ea4\u6362\u673a\uff0c\u865a\u62df\u4ea4\u6362\u673a\u4f1a\u628a",(0,l.jsx)(n.code,{children:"ARP"}),"\u5e7f\u64ad\u5230\u5176\u5b83\u63d2\u5165\u5230\u7f51\u6865\u7684\u6240\u6709\u5bb9\u5668\uff0c",(0,l.jsx)(n.code,{children:"C2"}),"\u6536\u5230",(0,l.jsx)(n.code,{children:"ARP"}),"\u534f\u8bae\u4e4b\u540e\u4f1a\u56de\u590d",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u3002"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u67e5\u627e\u5230",(0,l.jsx)(n.code,{children:"C2"}),"\u7684",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u4e4b\u540e\u5c31\u53ef\u4ee5\u53d1\u8d77\u901a\u4fe1\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u4e8c\u8de8\u4e3b\u673a\u5bb9\u5668\u901a\u4fe1",children:"\u4e8c\u3001\u8de8\u4e3b\u673a\u5bb9\u5668\u901a\u4fe1"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\u8de8\u4e3b\u673a\u4e4b\u95f4\u5bb9\u5668\u901a\u4fe1\u6309\u662f\u5426\u4f9d\u8d56\u5e95\u5c42\u7f51\u7edc\u73af\u5883\u6765\u5212\u5206\u4e3b\u8981\u5206\u4e3a",(0,l.jsx)(n.code,{children:"Overlay"}),"\u548c",(0,l.jsx)(n.code,{children:"Underlay"}),"\u4e24\u79cd\u7f51\u7edc\u7ed3\u6784\uff0c",(0,l.jsx)(n.code,{children:"Overlay"}),"\u7f51\u7edc\u8981\u6c42\u53ea\u662f\u4e3b\u673a\u4e4b\u95f4\u7f51\u7edc\u53ef\u8fbe\u5373\u53ef\uff0c\u4e0d\u8981\u6c42\u4e3b\u673a\u4e4b\u95f4\u540c\u5904\u4e8c\u5c42\u57df\uff1b",(0,l.jsx)(n.code,{children:"Underlay"}),"\u5bf9\u5e95\u5c42\u7684\u57fa\u7840\u8bbe\u65bd\u6709\u8981\u6c42\uff0c\u6309\u7167\u5b9e\u73b0\u7684\u65b9\u5f0f\u5bf9\u5e95\u5c42\u7684\u7f51\u7edc\u57fa\u7840\u8bbe\u65bd\u6709\u4e0d\u540c\u7684\u8981\u6c42\uff0c\u6bd4\u5982",(0,l.jsx)(n.code,{children:"Flanan host-gw"}),"\u7ec4\u4ef6\u8981\u6c42\u4e3b\u673a\u4e4b\u95f4\u540c\u5904\u4e8c\u5c42\u57df\uff0c\u4e5f\u5c31\u662f\u4e3b\u673a\u4e4b\u95f4\u8981\u8fde\u63a5\u5230\u4e00\u4e2a\u4ea4\u6362\u673a\u4e0a\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u540d\u8bcd-1",children:"\u540d\u8bcd"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Overlay Network"}),"(\u8986\u76d6\u7f51\u7edc): \u5728\u5df2\u6709\u7684\u5bbf\u4e3b\u673a\u7f51\u7edc\u4e4b\u4e0a\uff0c\u901a\u8fc7\u8f6f\u4ef6\u6784\u5efa\u4e00\u4e2a\u8986\u76d6\u5728\u5bbf\u4e3b\u673a\u7f51\u7edc\u4e4b\u4e0a\u7684\u3001\u53ef\u4ee5\u628a\u6240\u6709\u5bb9\u5668\u8fde\u901a\u5728\u4e00\u8d77\u7684\u865a\u62df\u7f51\u7edc\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Tun\u8bbe\u5907(Tunnel\u8bbe\u5907)"}),"\uff1a\u5728",(0,l.jsx)(n.code,{children:"Linux"}),"\u4e2d\uff0c",(0,l.jsx)(n.code,{children:"TUN"}),"\u8bbe\u5907\u662f\u4e00\u79cd\u5de5\u4f5c\u5728\u4e09\u5c42\uff08",(0,l.jsx)(n.code,{children:"Network Layer"}),"\uff09\u7684\u865a\u62df\u7f51\u7edc\u8bbe\u5907;",(0,l.jsx)(n.code,{children:"Tun"}),"\u8bbe\u5907\u7684\u529f\u80fd\u5c31\u662f\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u548c\u7528\u6237\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u4f20\u9012",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\uff0c"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"VXLAN"}),": \u865a\u62df\u53ef\u6269\u5c55\u5c40\u57df\u7f51(",(0,l.jsx)(n.code,{children:"Virtual Extensible LAN"}),"),\u662f",(0,l.jsx)(n.code,{children:"LINUX"}),"\u5185\u6838\u652f\u6301\u7684\u4e00\u79cd\u7f51\u7edc\u865a\u62df\u5316\u6280\u672f\uff0c",(0,l.jsx)(n.code,{children:"VXLAN"}),"\u5b8c\u5168\u5728\u5185\u6838\u6001\u5b9e\u73b0\u7f51\u7edc\u6570\u636e\u5305\u7684\u5c01\u88c5\u548c\u89e3\u5c01\u88c5\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"VTEP"}),"\uff1a\u865a\u62df\u96a7\u9053\u7aef\u70b9\u8bbe\u5907\uff0c\u5b83\u65e2\u6709",(0,l.jsx)(n.code,{children:"IP"}),"\uff0c\u4e5f\u6709",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"BGP"}),": \u8fb9\u754c\u7f51\u5173\u534f\u8bae\uff08",(0,l.jsx)(n.code,{children:"Border Gateway Protocol"}),"\uff09,\u5b83\u662f\u4e00\u4e2a",(0,l.jsx)(n.code,{children:"Linux"}),"\u5185\u6838\u539f\u751f\u5c31\u652f\u6301\u7684\u3001\u4e13\u95e8\u7528\u5728\u5927\u89c4\u6a21\u6570\u636e\u4e2d\u5fc3\u91cc\u7ef4\u62a4\u4e0d\u540c\u7684\u81ea\u6cbb\u7cfb\u7edf\u4e4b\u95f4\u8def\u7531\u4fe1\u606f\u7684\u3001\u65e0\u4e2d\u5fc3\u7684\u8def\u7531\u534f\u8bae\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u8de8\u4e3b\u673a\u901a\u4fe1",children:"\u8de8\u4e3b\u673a\u901a\u4fe1"}),"\n",(0,l.jsxs)(n.p,{children:["\u8de8\u4e3b\u673a\u4e4b\u95f4\u7684\u5bb9\u5668\u901a\u4fe1\uff0c\u901a\u8fc7\u91c7\u7528",(0,l.jsx)(n.code,{children:"Overlay Network"}),"\u6765\u5b9e\u73b0\u8de8\u4e3b\u673a\u4e4b\u95f4\u7684\u5bb9\u5668\u901a\u4fe1\uff0c",(0,l.jsx)(n.code,{children:"Overlay Network"}),"\u7684\u5b9e\u73b0\u6709\u591a\u79cd\u65b9\u5f0f\u3002"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://gitee.com/lengrongfu/blog-static-file/raw/master/overlay_network.png",alt:"Overlay Network"})}),"\n",(0,l.jsx)(n.h3,{id:"overlay-\u6a21\u5f0f",children:"Overlay \u6a21\u5f0f"}),"\n",(0,l.jsx)(n.h5,{id:"1\u4e09\u5c42flannel-udp",children:"1\u3001\u4e09\u5c42Flannel UDP"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Flannel UDP"}),"\u6a21\u5f0f\u662f",(0,l.jsx)(n.code,{children:"Flannel"}),"\u6700\u5f00\u59cb\u63d0\u4f9b\u7684\u4e00\u79cd\u6700\u7b80\u5355\u4e14\u6700\u6613\u5b9e\u73b0\u7684\u5bb9\u5668\u8de8\u4e3b\u7f51\u7edc\u65b9\u6848\uff0c\u4f46\u662f\u56e0\u4e3a\u6027\u80fd\u6700\u5dee\uff0c\u6240\u4ee5\u540e\u6765\u88ab\u5f03\u7528\u3002\u4f46\u662f\u5bf9\u4e8e\u7406\u89e3",(0,l.jsx)(n.code,{children:"Overlay"}),"\u7684\u5b9e\u73b0\u65b9\u5f0f\u8fd8\u662f\u5f88\u6709\u53c2\u8003\u610f\u4e49\u7684\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u6211\u4eec\u4ee5\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bb2\u8ff0\u8fd9\u4e2a\u7f51\u7edc\u8bbf\u95ee\u7684\u6d41\u7a0b\uff0c\u5728\u8fd9\u4e2a\u6d41\u7a0b\u4e2d\uff0c\u6709\u4e24\u53f0\u5bbf\u4e3b\u673a\uff0c\u56db\u4e2a\u5bb9\u5668\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7",(0,l.jsx)(n.code,{children:"Container-1"}),"\u5bb9\u5668\u8bf7\u6c42",(0,l.jsx)(n.code,{children:"Container-4"}),"\u3002"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://gitee.com/lengrongfu/blog-static-file/raw/master/flannel_udp_network.png",alt:""})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Container-1"}),"\u5bb9\u5668\u5411",(0,l.jsx)(n.code,{children:"Container-4"}),"\u5bb9\u5668\u53d1\u8d77\u8bf7\u6c42\uff0c",(0,l.jsx)(n.code,{children:"Docker0"}),"\u662f\u4f4d\u4e8e",(0,l.jsx)(n.code,{children:"Root Network Namespace"}),"\u7684\uff0c\u901a\u8fc7",(0,l.jsx)(n.code,{children:"veth peer"}),"\u4e00\u5934\u8fde\u7740\u5bb9\u5668\u7684",(0,l.jsx)(n.code,{children:"Network Namespace"}),"\u4e00\u5934\u8fde\u7740\u4f4d\u4e8e",(0,l.jsx)(n.code,{children:"Root Netwrok Namespace"}),"\u7684",(0,l.jsx)(n.code,{children:"Docker0"}),"\u865a\u62df\u7f51\u7edc\u8bbe\u5907\u3002"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5bb9\u5668",(0,l.jsx)(n.code,{children:"100.96.1.2"}),"\u8bbf\u95ee",(0,l.jsx)(n.code,{children:"100.96.2.2"}),"\uff0c\u7531\u4e8e\u76ee\u7684\u5730\u5740\u4e0d\u5728",(0,l.jsx)(n.code,{children:"Docker0"}),"\u7f51\u6865\u7684\u7f51\u6bb5\u5185(\u901a\u8fc7",(0,l.jsx)(n.code,{children:"ARP"}),"\u8bf7\u6c42\u4e00\u6b21\u5c31\u77e5\u9053\u76ee\u6807\u5bb9\u5668\u4e0d\u5728\u6b64\u7f51\u6865\u4e0a)\uff0c\u6240\u4ee5\u8fd9\u4e2a",(0,l.jsx)(n.code,{children:"IP"}),"\u4f1a\u6267\u884c",(0,l.jsx)(n.code,{children:"Container-1"}),"\u7684\u9ed8\u8ba4\u8def\u7531\u89c4\u5219\u4e2d\uff0c\u5bb9\u5668\u4e2d\u7684\u9ed8\u8ba4\u8def\u7531\u89c4\u5219\u5c31\u662f\u5982\u4e0b\u7684",(0,l.jsx)(n.code,{children:"default via 172.17.0.1 dev eth0 "}),"\u3002\u5bf9\u5e94\u5230\u4e0a\u56fe\u7684\u6b65\u9aa41\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'# \u5bb9\u5668\u4e2d\u9ed8\u8ba4\u8bbe\u7f6e\u7684\u7684\u8def\u7531\u89c4\u5219\uff0c\n[root@94a6c877b01a /]# ip route\ndefault via 172.17.0.1 dev eth0 \n172.17.0.0/16 dev eth0 proto kernel scope link src 172.17.0.2 \n# \u4e0b\u4e00\u8df3\u662f172.17.0.1\u4e14\u4eceeth0\u8bbe\u5907\u4e0a\u51fa\u53bb\uff0c\u901a\u8fc7\u67e5\u770bdocker\u7684\u7f51\u7edc\uff0c172.17.0.1\u5c31\u662fbridge\u8bbe\u5907\u7684\u7f51\u5173IP\nlengrongfu@MacintoshdeMacBook-Pro ~ % docker network ls        \nNETWORK ID     NAME                               DRIVER    SCOPE\ne522990979b3   bridge                             bridge    local\n# \u67e5\u770b\u7f51\u7edc\nlengrongfu@MacintoshdeMacBook-Pro ~ % docker inspect network e522990979b3\n[\n    {\n        "Name": "bridge",\n        "Id": "e522990979b365e9df4d967c3600483e598e530361deb28513b6e75b8b66bedf",\n        "Created": "2021-04-12T12:11:57.321486866Z",\n        "Scope": "local",\n        "Driver": "bridge",\n        "EnableIPv6": false,\n        "IPAM": {\n            "Driver": "default",\n            "Options": null,\n            "Config": [\n                {\n                    "Subnet": "172.17.0.0/16",\n                    "Gateway": "172.17.0.1"\n                }\n            ]\n        },\n        "Internal": false,\n        "Attachable": false,\n        "Ingress": false,\n        "ConfigFrom": {\n            "Network": ""\n        },\n        "ConfigOnly": false,\n        "Containers": {\n            "94a6c877b01ac3a1638f1c5cde87e7c58be9ce0aafd4a78efcb96528ab00ed94": {\n                "Name": "c2",\n                "EndpointID": "a5c12fb3800991228f8dc3a2a8de1d6f4865439701a83558e4430c2aebf783a8",\n                "MacAddress": "02:42:ac:11:00:02",\n                "IPv4Address": "172.17.0.2/16",\n                "IPv6Address": ""\n            }\n        },\n        "Options": {\n            "com.docker.network.bridge.default_bridge": "true",\n            "com.docker.network.bridge.enable_icc": "true",\n            "com.docker.network.bridge.enable_ip_masquerade": "true",\n            "com.docker.network.bridge.host_binding_ipv4": "0.0.0.0",\n            "com.docker.network.bridge.name": "docker0",\n            "com.docker.network.driver.mtu": "1500"\n        },\n        "Labels": {}\n    }\n]\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u8fdb\u5165\u5230",(0,l.jsx)(n.code,{children:"Docker0"}),"\u7f51\u6865\u4e4b\u540e\u5c31\u6309\u7167\u4e3b\u673a\u4e0a\u7684\u8def\u7531\u53d6\u51b3\u4e8e\u540e\u7eed\u5982\u4f55\u8d70\u3002\u5982\u4e0b\u5c31\u662f\u4e3b\u673a\u7684\u8def\u7531\u8868\uff0c\u8bbf\u95ee\u76ee\u6807",(0,l.jsx)(n.code,{children:"IP"}),"\u4e3a",(0,l.jsx)(n.code,{children:"100.96.2.2"}),"\u7684\u8bbe\u5907\u4f1a\u547d\u4e2d\u7b2c\u4e8c\u6761\u5339\u914d\u89c4\u5219\uff0c\u610f\u601d\u662f\u8bbf\u95ee",(0,l.jsx)(n.code,{children:"100.96.0.0/16"}),"\u7f51\u6bb5\u7684\u6570\u636e\u53bb",(0,l.jsx)(n.code,{children:"flannel0"}),"\u8bbe\u5907\uff0c\u5e76\u4e14\u613f",(0,l.jsx)(n.code,{children:"IP"}),"\u4e3a",(0,l.jsx)(n.code,{children:"100.96.1.0"}),"\u3002\u5bf9\u5e94\u5230\u4e0a\u56fe\u7684\u6b65\u9aa42\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# Node1\u8def\u7531\u8868\n$ ip route\n1 Default via 10.168.0.1 dev eth0\n2 100.96.0.0/16 dev flannel0 proto kernel scope link src 100.96.1.0\n3 100.96.1.0/24 dev docker0 proto kernel scope link src 100.96.1.1\n4 10.168.0.0/24 dev eth0 proto kernel scope link src 10.168.0.2\n"})}),"\n",(0,l.jsx)(n.h6,{id:"flannel0\u8bbe\u5907",children:"Flannel0\u8bbe\u5907"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4e0a\u8ff0\u8bf4\u4e86",(0,l.jsx)(n.code,{children:"Flannel0"}),"\u662f\u4e00\u4e2a",(0,l.jsx)(n.code,{children:"TUN"}),"\u865a\u62df\u4e09\u5c42\u7f51\u7edc\u8bbe\u5907\uff0c\u4e3b\u8981\u662f\u5728\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u4e4b\u95f4\u4f20\u9012",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\uff1b\u7ee7\u7eed\u6309\u4e0a\u8ff0\u7684\u6d41\u7a0b\u5206\u6790\uff0c\u6570\u636e\u62a5\u6587\u4ece\u5185\u6838\u6001\u5230\u8fbe",(0,l.jsx)(n.code,{children:"Flannel0"}),"\u8bbe\u5907\u4e4b\u540e\uff0c\u4f1a\u88ab\u4f20\u9012\u7ed9\u521b\u5efa",(0,l.jsx)(n.code,{children:"Flannel0"}),"\u8bbe\u5907\u7684\u8fdb\u7a0b\u4e5f\u5c31\u662f",(0,l.jsx)(n.code,{children:"FlannelD"}),"\u8fdb\u7a0b\uff0c\u7136\u540e",(0,l.jsx)(n.code,{children:"flanneld"}),"\u8fdb\u7a0b\u770b\u5230\u76ee\u7684\u5730\u5740\u662f",(0,l.jsx)(n.code,{children:"100.96.2.2"}),",\u5c31\u628a\u6570\u636e\u62a5\u6587\u53d1\u9001\u5230",(0,l.jsx)(n.code,{children:"Node2"}),"\u8282\u70b9\u4e0a\u7684",(0,l.jsx)(n.code,{children:"flanneld"}),"\u8fdb\u7a0b\u76d1\u542c\u7684",(0,l.jsx)(n.code,{children:"UDP"}),"\u7aef\u53e3\u4e0a\u3002",(0,l.jsx)(n.code,{children:"flanneld"}),"\u4f1a\u628a\u8981\u53d1\u9001\u7684\u6570\u636e\u5c01\u88c5\u4e3a\u4e00\u4e2a",(0,l.jsx)(n.code,{children:"UDP"}),"\u6570\u636e\u5305\u53d1\u51fa\u53bb\u3002\u5bf9\u5e94\u5230\u4e0a\u56fe\u7684\u6b65\u9aa43\u30014\u30015\u30016\u3002","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"flanneld"}),"\u8fdb\u7a0b\u662f\u600e\u4e48\u77e5\u9053",(0,l.jsx)(n.code,{children:"100.96.2.2"}),"\u8fd9\u4e2a",(0,l.jsx)(n.code,{children:"ip"}),"\u5728",(0,l.jsx)(n.code,{children:"Node2"}),"\u4e0a\u5462\uff0c\u8fd9\u662f\u56e0\u4e3a\u5b83\u5229\u7528\u4e86\u5b50\u7f51\uff0c\u5728\u6bcf\u4e2a\u8282\u70b9\u542f\u52a8\u7684\u65f6\u5019\u90fd\u4f1a\u88ab\u6307\u5b9a\u4e00\u4e2a\u5b57\u7f51\u6bb5\uff0c\u901a\u8fc7\u5b57\u7f51\u5c31\u80fd\u786e\u5b9a\u8fd9\u4e2a",(0,l.jsx)(n.code,{children:"ip"}),"\u662f\u5c5e\u4e8e\u90a3\u4e2a\u8282\u70b9\u7684\uff0c\u5b50\u7f51\u88ab\u5b58\u5728",(0,l.jsx)(n.code,{children:"etcd"}),"\u91cc\u9762\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Node2"}),"\u4e0a\u7684",(0,l.jsx)(n.code,{children:"flanneld"}),"\u8fdb\u7a0b\u6536\u5230\u6570\u636e\u5305\u4e4b\u540e\uff0c\u4f1a\u53d1\u9001\u5230",(0,l.jsx)(n.code,{children:"flannel0"}),"\u8bbe\u5907\u4e0a\uff0c\u8fd9\u662f\u4e00\u4e2a\u4ece\u7528\u6237\u6001\u5230\u5185\u6838\u6001\u7684\u8fc7\u7a0b\uff0c\u6240\u4ee5",(0,l.jsx)(n.code,{children:"Linux"}),"\u5185\u6838\u7f51\u7edc\u534f\u8bae\u6808\u5c31\u4f1a\u8d1f\u8d23\u5904\u7406\u8fd9\u4e2a",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\uff0c\u5177\u4f53\u7684\u5904\u7406\u65b9\u6cd5\uff0c\u5c31\u662f\u901a\u8fc7\u672c\u673a\u7684\u8def\u7531\u8868\u6765\u5bfb\u627e\u8fd9\u4e2a",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\u7684\u4e0b\u4e00\u6b65\u6d41\u5411\u3002\u5bf9\u5e94\u5230\u4e0a\u56fe\u7684\u6b65\u9aa47\u30018\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# node2\u4e0a\u7684\u8def\u7531\u8868\n$ ip route\n1 default via 10.168.0.1 dev eth0\n2 100.96.0.0/16 dev flannel0 proto kernel scope link src 100.96.2.0\n3 100.96.2.0/24 dev docker0 proto kernel scope link src 100.96.2.1\n4 10.168.0.0/24 dev eth0 proto kernel scope link src 10.168.0.3\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u901a\u8fc7\u89e3\u6790\u51fa\u76ee\u6807",(0,l.jsx)(n.code,{children:"ip"}),"\u4e3a",(0,l.jsx)(n.code,{children:"100.96.2.2"}),"\uff0c\u4ed6\u548c\u7b2c\u4e09\u6761\u7684\u8def\u7531\u89c4\u5219\u5339\u914d\u66f4\u52a0\u7cbe\u786e\uff0c\u8fd9\u6761\u8def\u7531\u89c4\u5219\u7684\u610f\u601d\u662f\u628a\u53d1\u5f80",(0,l.jsx)(n.code,{children:"100.96.2.0/24"}),"\u7f51\u6bb5\u7684\u7684\u6570\u636e\u5305\u53d1\u9001\u5230",(0,l.jsx)(n.code,{children:"docker0"}),"\u8bbe\u5907\u4e0a\u53bb\uff0c\u5e76\u4e14\u8bbe\u7f6e\u6e90",(0,l.jsx)(n.code,{children:"IP"}),"\u4e3a",(0,l.jsx)(n.code,{children:"100.96.2.1"}),"\u3002\u5bf9\u5e94\u5230\u4e0a\u56fe\u7684\u6b65\u9aa49\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u6570\u636e\u5305\u8fdb\u5165\u5230",(0,l.jsx)(n.code,{children:"docker0"}),"\u8bbe\u5907\u4e4b\u540e\uff0c",(0,l.jsx)(n.code,{children:"docker0"}),"\u7f51\u6865\u4f1a\u626e\u6f14\u4e8c\u5c42\u4ea4\u6362\u673a\u7684\u89d2\u8272\uff0c\u5c06\u6570\u636e\u5305\u53d1\u9001\u7ed9\u6b63\u786e\u7684",(0,l.jsx)(n.code,{children:"veth pair"}),"\u5bf9\uff0c\u8fdb\u8fc7\u6b64\u8bbe\u5907\u4e4b\u540e\u5c31\u8fdb\u5165\u5230",(0,l.jsx)(n.code,{children:"Contaniner-2"}),"\u7684\u7f51\u7edc\u534f\u8bae\u6808\u4e2d\u3002\u5bf9\u5e94\u5230\u4e0a\u56fe\u7684\u6b65\u9aa410\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Flannel UDP"}),"\u6a21\u5f0f\u63d0\u4f9b\u7684\u662f\u4e00\u4e2a\u4e09\u5c42\u7684",(0,l.jsx)(n.code,{children:"Overlay"}),"\u7f51\u7edc\uff0c\u5b83\u9996\u9009\u5bf9\u53d1\u51fa\u7aef\u7684",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\u8fdb\u884c",(0,l.jsx)(n.code,{children:"UDP"}),"\u5c01\u88c5\uff0c\u7136\u540e\u5728\u63a5\u6536\u7aef\u8fdb\u884c\u89e3\u5c01\u88c5\u62ff\u5230\u539f\u59cb",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\uff0c\u8fdb\u800c\u628a\u8fd9\u4e2a",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\u8f6c\u53d1\u7ed9\u76ee\u6807\u5bb9\u5668\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Flannel UDP"}),"\u6a21\u5f0f\u6709\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\uff0c\u4e3b\u8981\u95ee\u9898\u662f\uff0c\u7531\u4e8e\u4f7f\u7528\u4e86",(0,l.jsx)(n.code,{children:"TUN"}),"\u8bbe\u5907\uff0c\u4ec5\u5728\u53d1\u51fa",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5c31\u9700\u8981\u7ecf\u8fc7\u4e09\u6b21\u7528\u6237\u6001\u548c\u5185\u6838\u6001\u4e4b\u95f4\u7684\u6570\u636e\u62f7\u8d1d\u3002"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://gitee.com/lengrongfu/blog-static-file/raw/master/flannel_tun.png",alt:"tun"})}),"\n",(0,l.jsx)(n.h5,{id:"2\u4e09\u5c42calico-ipip",children:"2\u3001\u4e09\u5c42Calico ipip"}),"\n",(0,l.jsx)(n.h5,{id:"3\u4e8c\u5c42\u4e09\u5c42vxlan",children:"3\u3001\u4e8c\u5c42+\u4e09\u5c42VXLAN"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"VXLAN"}),"\u7f51\u7edc\u7684\u8bbe\u8ba1\u601d\u60f3\u662f\uff0c\u5728\u73b0\u6709\u7684\u4e09\u5c42\u7f51\u7edc\u4e4b\u4e0a\uff0c\u8986\u76d6\u4e00\u5c42\u865a\u62df\u7684\u3001\u7531\u5185\u6838",(0,l.jsx)(n.code,{children:"VXLAN"}),"\u6a21\u5757\u8d1f\u8d23\u7ef4\u62a4\u7684\u4e8c\u5c42\u7f51\u7edc\uff0c\u4f7f\u5f97\u8fde\u63a5\u5728\u8fd9\u4e2a",(0,l.jsx)(n.code,{children:"VXLAN"}),"\u4e8c\u5c42\u7f51\u7edc\u4e0a\u7684\u4e3b\u673a\u4e4b\u95f4\uff0c\u53ef\u4ee5\u50cf\u5728\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u90a3\u6837\u81ea\u7531\u901a\u4fe1\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\u4e3a\u4e86\u80fd\u5728\u4e8c\u5c42\u7f51\u7edc\u4e0a\u6253\u901a\u96a7\u9053\uff0c",(0,l.jsx)(n.code,{children:"VXLAN"}),"\u4f1a\u5728\u5bbf\u4e3b\u673a\u4e0a\u8bbe\u7f6e\u4e00\u4e2a\u7279\u6b8a\u7684\u7f51\u7edc\u8bbe\u5907\u4f5c\u4e3a\u96a7\u9053\u7684\u4e24\u7aef\uff0c\u8fd9\u4e2a\u8bbe\u5907\u5c31\u53eb\u4f5c",(0,l.jsx)(n.code,{children:"VTEP"}),"\uff0c\u5168\u79f0\u662f\uff1a(",(0,l.jsx)(n.code,{children:"VXLAN Tun End Poin"}),")\u865a\u62df\u96a7\u9053\u7aef\u70b9\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"VTEP"}),"\u8bbe\u5907\u7684\u4f5c\u7528\u548c",(0,l.jsx)(n.code,{children:"flanneld"}),"\u8fdb\u7a0b\u7684\u4f5c\u7528\u662f\u4e00\u6837\u7684\uff0c\u5c31\u662f\u505a\u6570\u636e\u5305\u7684\u5c01\u88c5\u548c\u89e3\u5c01\u88c5\uff0c\u53ea\u4e0d\u8fc7\uff0c\u5b83\u8fdb\u884c\u5c01\u88c5\u548c\u89e3\u5c01\u88c5\u7684\u662f\u4e8c\u5c42\u6570\u636e\u5e27\uff0c\u800c\u4e14\u8fd9\u4e2a\u5de5\u4f5c\u6d41\u7a0b\uff0c\u5168\u90fd\u662f\u5728\u5185\u6838\u91cc\u5b8c\u6210\u7684\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"underlay-\u6a21\u5f0f",children:"Underlay \u6a21\u5f0f"}),"\n",(0,l.jsx)(n.h5,{id:"1\u4e09\u5c42\u6a21\u5f0fbgp",children:"1\u3001\u4e09\u5c42\u6a21\u5f0fBGP"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://gitee.com/lengrongfu/blog-static-file/raw/master/bgp.png",alt:"BGP"})}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u4e0a\u56fe\u662f\u4e00\u4e2a\u5178\u578b\u7684",(0,l.jsx)(n.code,{children:"BGP"}),"\u7f51\u7edc\u62d3\u6251\u56fe\uff0c\u901a\u8fc7",(0,l.jsx)(n.code,{children:"Route1"}),"\u548c",(0,l.jsx)(n.code,{children:"Route2"}),"\u4f5c\u4e3a\u8fb9\u754c\u8def\u7531\u7f51\u5173\uff0c\u628a\u5176\u5b83",(0,l.jsx)(n.code,{children:"LAN"}),"\u7684\u8def\u7531\u4fe1\u606f\u5199\u5165\u5230\u5f53\u524d\u7684\u8def\u7531\u4e2d\uff0c\u5c31\u5b9e\u73b0\u4e86\u4e0d\u540c",(0,l.jsx)(n.code,{children:"LAN"}),"\u4e0b\u7684\u8def\u7531\u4fe1\u606f\u540c\u6b65\uff0c\u8fbe\u5230\u4e09\u5c42\u7f51\u7edc\u5168\u901a\u3002"]}),"\n",(0,l.jsx)(n.h6,{id:"calico-bgp-\u4f7f\u7528",children:"Calico BGP \u4f7f\u7528"}),"\n",(0,l.jsxs)(n.p,{children:["\u200b\t\t\u5728\u4e86\u89e3\u4e86",(0,l.jsx)(n.code,{children:"BGP"}),"\u4e4b\u540e\uff0c",(0,l.jsx)(n.code,{children:"Calico"}),"\u9879\u76ee\u7684\u67b6\u6784\u5c31\u975e\u5e38\u5bb9\u6613\u7406\u89e3\u4e86\uff0c\u5b83\u628a\u6bcf\u4e2a\u4e3b\u673a\u8282\u70b9\u5f53\u505a\u4e00\u4e2a\u8fb9\u754c\u8def\u7531\u6765\u770b\u5f85\uff0c\u6240\u4ee5\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u90fd\u4fdd\u5b58\u4e86\u6240\u6709\u5176\u4ed6\u8282\u70b9\u7684\u8def\u7531\u4fe1\u606f\uff0c\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0b\u5b83\u7684\u5b9e\u73b0\uff0c\u5b83\u7531\u4e09\u4e2a\u90e8\u5206\u7ec4\u6210\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Calico"}),"\u7684",(0,l.jsx)(n.code,{children:"CNI"}),"\u63d2\u4ef6\uff0c\u8fd9\u662f",(0,l.jsx)(n.code,{children:"Caclico"}),"\u548c",(0,l.jsx)(n.code,{children:"Kubernetes"}),"\u5bf9\u63a5\u7684\u90e8\u5206\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"BIRD"}),"\u662f",(0,l.jsx)(n.code,{children:"BGP"}),"\u7684\u5ba2\u6237\u7aef\uff0c\u4e13\u95e8\u8d1f\u8d23\u5728\u96c6\u7fa4\u91cc\u9762\u5206\u53d1\u8def\u7531\u4fe1\u606f\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Felix"}),",\u5b83\u662f\u4e00\u4e2a",(0,l.jsx)(n.code,{children:"Demoset"}),"\uff0c\u8d1f\u8d23\u5728\u5bbf\u4e3b\u673a\u4e0a\u63d2\u5165\u8def\u7531\u89c4\u5219\uff08\u5199\u5165",(0,l.jsx)(n.code,{children:"Linux"}),"\u5185\u6838\u7684",(0,l.jsx)(n.code,{children:"FIB"}),"\u8f6c\u53d1\u4fe1\u606f\u8868\uff09\uff0c\u4ee5\u53ca\u7ef4\u62a4",(0,l.jsx)(n.code,{children:"Calico"}),"\u6240\u9700\u7684\u7f51\u7edc\u8bbe\u5907\u7b49\u5de5\u4f5c\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u200b\t",(0,l.jsx)(n.code,{children:"Calico BGP"}),"\u6a21\u5f0f\u548c",(0,l.jsx)(n.code,{children:"Flannel host-gw"}),"\u6a21\u5f0f\u4e0d\u540c\uff0c",(0,l.jsx)(n.code,{children:"Calico"}),"\u6ca1\u6709\u521b\u5efa\u4efb\u4f55\u7684\u865a\u62df\u7f51\u6865\u8bbe\u5907\uff0c",(0,l.jsx)(n.code,{children:"Calico"}),"\u7684\u5de5\u4f5c\u65b9\u5f0f\u91c7\u7528\u5982\u4e0b\u56fe\u6765\u8bf4\u660e\u3002"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://gitee.com/lengrongfu/blog-static-file/raw/master/calico_bgp.png",alt:"calico_bgp"})}),"\n",(0,l.jsxs)(n.p,{children:["\u200b\t\t",(0,l.jsx)(n.code,{children:"Calico BGP"}),"\u6a21\u5f0f\u7684\u7f51\u7edc\u4ea4\u4e92\u56fe\u5982\u4e0a\u6240\u793a\uff0c\u5982",(0,l.jsx)(n.code,{children:"container1"}),"\u9700\u8981\u8bbf\u95ee",(0,l.jsx)(n.code,{children:"Container3"}),"\uff0c\u6211\u4eec\u6765\u5206\u6790\u4e0b\u7f51\u7edc\u5982\u4f55\u5230\u8fbe\u3002\u56e0\u4e3a\u6ca1\u6709\u91c7\u7528",(0,l.jsx)(n.code,{children:"cni0"}),"\u865a\u62df\u7f51\u6865\u8bbe\u5907\uff0c\u56e0\u6b64",(0,l.jsx)(n.code,{children:"veth"}),"\u8bbe\u5907\u5bf9\u7684\u4e00\u7aef\u662f\u5728\u5bb9\u5668\u7684",(0,l.jsx)(n.code,{children:"Network Namespace"}),"\u4e2d\u7684\uff0c\u4e00\u7aef\u662f\u5728\u5bbf\u4e3b\u673a\u7684\u5bb9\u5668\u7f51\u7edc\u7a7a\u95f4\u7684\uff0c"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u9996\u5148",(0,l.jsx)(n.code,{children:"Calico CNI"}),"\u63d2\u4ef6\u8fd8\u9700\u8981\u5728\u6bcf\u4e2a\u5bbf\u4e3b\u673a\u4e0a\u4e3a\u6bcf\u4e2a\u5bb9\u5668\u7684",(0,l.jsx)(n.code,{children:"Veth Pair"}),"\u8bbe\u5907\u914d\u7f6e\u4e00\u6761\u8def\u7531\u89c4\u5219\uff0c\u7531\u4e8e\u63a5\u53d7\u4f20\u5165\u7684",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\uff0c\u6bd4\u5982\uff1a"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# 192.168.0.2\u8282\u70b9\u4e0a\u7684\u8def\u7531\u4fe1\u606f\u6709\n$ ip route\n10.20.0.2 dev cali1 scope link\n10.20.0.3 dev cali2 scope link\n\n# 192.168.0.3\u8282\u70b9\u4e0a\u7684\u8def\u7531\u4fe1\u606f\u6709\n$ ip route\n10.20.1.2 dev cali3 scope link\n10.20.1.3 dev cali4 scope link\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u6bcf\u4e2a\u8282\u70b9\u4e0a\u8fd8\u6709",(0,l.jsx)(n.code,{children:"BGP"}),"\u5e7f\u64ad\u7684\u5176\u5b83\u8282\u70b9\u8def\u7531\u534f\u8bae\uff0c\u6bd4\u5982\uff1a"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# 192.168.0.2\u4e0a\u6709\u4e00\u6761\u6307\u5411192.169.0.3\u7684\u8def\u7531\n$ ip route\n10.20.1.0/24 via 192.168.0.3 dev eth0\n# 192.168.0.3\u4e0a\u6709\u4e00\u6761\u6307\u5411192.168.0.2\u7684\u8def\u7531\n$ ip route\n10.20.0.0/24 via 192.168.0.2 dev eth0\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u9ed8\u8ba4\u7684",(0,l.jsx)(n.code,{children:"Calico BGP"}),"\u4f7f\u7528\u7684\u662f",(0,l.jsx)(n.code,{children:"Node to Node"}),"\u7684\u6a21\u5f0f\uff0c\u4f1a\u5bfc\u81f4\u6bcf\u4e2a\u8282\u70b9\u4e0a\u7684\u8fde\u63a5\u4ee5",(0,l.jsx)(n.code,{children:"N^2"}),"\u7684\u6570\u72ec\u589e\u957f\uff0c\u4e00\u822c\u63a8\u8350\u5c11\u4e8e\u4f7f\u7528",(0,l.jsx)(n.code,{children:"100"}),"\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\u4e2d\u3002\u5728\u5927\u89c4\u6a21\u96c6\u7fa4\u4e2d\uff0c\u9700\u8981\u7528\u5230\u4e00\u4e2a\u53eb",(0,l.jsx)(n.code,{children:"Route Reflector"}),"\u7684\u6a21\u5f0f\uff0c\u6240\u6709\u7684\u8def\u7531\u4f1a\u7edf\u4e00\u4e0a\u62a5\u5230\u4e00\u4e2a\u4e2d\u5fc3\u8282\u70b9\uff0c\u5176\u5b83\u8282\u70b9\u90fd\u4ece\u4e2d\u5fc3\u8282\u70b9\u8fdb\u884c\u540c\u6b65\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Calico BGP"}),"\u6a21\u5f0f\u548c",(0,l.jsx)(n.code,{children:"Flannel host-gw"}),"\u6a21\u5f0f\u4e00\u6837\uff0c\u90fd\u6709\u4e00\u4e2a\u5bf9\u57fa\u7840\u7f51\u7edc\u8bbe\u65bd\u7684\u4f9d\u8d56\uff0c\u8981\u6c42\u96c6\u7fa4\u5bbf\u4e3b\u673a\u4e4b\u95f4\u662f\u4e8c\u5c42\u53ef\u8fbe\u7684\u3002\u5047\u5982\u5bbf\u4e3b\u673a\u4e4b\u95f4\u5904\u5728\u4e0d\u540c\u7684",(0,l.jsx)(n.code,{children:"LAN"}),"\u4e0b\uff0c\u5c31\u9700\u8981\u4f7f\u7528",(0,l.jsx)(n.code,{children:"Calico ipip"}),"\u7684",(0,l.jsx)(n.code,{children:"Overlay"}),"\u6a21\u5f0f\u4e86\u3002"]}),"\n",(0,l.jsx)(n.h5,{id:"2\u4e8c\u5c42vlan",children:"2\u3001\u4e8c\u5c42VLAN"}),"\n",(0,l.jsx)(n.h5,{id:"3flannel-host-gw",children:"3\u3001Flannel host-gw"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Flannel host-gw"}),"\u6a21\u5f0f\u4e00\u5f20\u56fe\u5c31\u53ef\u4ee5\u8bb2\u6e05\u695a\u4ed6\u4eec\u4e4b\u95f4\u7684\u5b9e\u73b0\u539f\u7406\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://gitee.com/lengrongfu/blog-static-file/raw/master/flannel_hostgw.png",alt:"host-gw"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CNI0"}),"\u8bbe\u5907\u662f\u4e00\u4e2a\u4e09\u5c42\u4ea4\u6362\u673a\uff0c\u5177\u6709\u4e8c\u5c42\u4ea4\u6362\u673a\u7684\u529f\u80fd\uff0c\u540c\u65f6\u5177\u6709\u72ec\u7acb",(0,l.jsx)(n.code,{children:"IP"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"flannel"}),"\u4ee5",(0,l.jsx)(n.code,{children:"Daemonset"}),"\u7684\u65b9\u5f0f\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u542f\u52a8\u4e00\u4e2a",(0,l.jsx)(n.code,{children:"Flanneld"}),"\u8fdb\u7a0b\uff0c\u7528\u4e8e\u7ef4\u62a4\u6bcf\u4e2a\u8282\u70b9\u4e0a\u7684\u8def\u7531\u4fe1\u606f\uff0c\u5b9e\u73b0\u65b9\u5f0f\u662f\uff0c\u672c\u5730"]}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\uff1a",(0,l.jsx)(n.code,{children:"192.168.1.0/24 via 10.20.0.3 dev eth0"}),"\u8def\u7531\u5b9a\u4e49\u4e86\u8bbf\u95ee",(0,l.jsx)(n.code,{children:"192.168.1.0/24"}),"\u7f51\u6bb5\u7684\u4e0b\u4e00\u8df3\u4e3a",(0,l.jsx)(n.code,{children:"10.20.0.3"}),"\u5e76\u4ece",(0,l.jsx)(n.code,{children:"eth0"}),"\u8bbe\u5907\u51fa\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u7136\u540e",(0,l.jsx)(n.code,{children:"IP"}),"\u5305\u88ab\u5c01\u88c5\u6210\u5e27\u53d1\u9001\u51fa\u53bb\u7684\u65f6\u5019\uff0c\u4f1a\u4f7f\u7528\u8def\u7531\u8868\u91cc\u7684\u4e0b\u4e00\u8df3\u6765\u8bbe\u7f6e\u76ee\u7684",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\uff1b\u8fd9\u6837\uff0c\u5c31\u80fd\u901a\u8fc7\u4e8c\u5c42\u7f51\u7edc\u8fbe\u5230\u76ee\u7684\u5bbf\u4e3b\u673a\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u56e0\u4e3a\u4ed6\u4f1a\u4f7f\u7528\u4e0b\u4e00\u8df3\u7684\u76ee\u7684",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\uff0c\u6240\u4ee5\u5b83\u8981\u6c42\u5bbf\u4e3b\u673a\u4e4b\u95f4\u662f\u4e8c\u5c42\u8054\u901a\u7684\uff0c\u4e0d\u5982\u5c31\u6ca1\u6cd5\u901a\u8fc7\u4f7f\u7528",(0,l.jsx)(n.code,{children:"ARP"}),"\u534f\u8bae\u7528",(0,l.jsx)(n.code,{children:"IP"}),"\u53bb\u83b7\u53d6",(0,l.jsx)(n.code,{children:"MAC"}),"\u5730\u5740\u4e86\u3002"]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(t,{...e})}):t(e)}},8453:(e,n,c)=>{c.d(n,{R:()=>s,x:()=>i});var l=c(6540);const d={},r=l.createContext(d);function s(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);